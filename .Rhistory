tibble(js) %>% unnest_longer(js)
tibble(js) %>% hoist(`Leave Date`)
tibble(js) %>% hoist(js)
tibble(js) %>% hoist(js) %>% hoist(`Leave Date`)
tibble(js) %>% unnest_auto()
tibble(js) %>% unnest_auto(js)
js
js[1]
js[1][1]
js[[1]]
js[[1]][1]
js[[1]][2]
transpose(js)
Vie(transpose(js))
View(transpose(js))
tibble(transpose(js))
t <- tranpose(js)
t <- transpose(js)
tibble(t) %>% unnest_wider(t)
tibble(t) %>% unnest_wider(t) %>% colnames()
js <- fromJSON(file = 'cached/JFK_IST.json') %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price($)`),
`Access Date` = as.Date(`Access Date`)
)
js <- fromJSON(file = 'cached/JFK_IST.json') %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price($)`),
`Access Date` = as.Date(`Access Date`)
)
js <- fromJSON(file = 'cached/JFK_IST.json') %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
)
data
runApp('flight_analyis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
data %>% drop_na()
js <- fromJSON(file = '../cached/JFK_IST.json') %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Price ($)`) %>% drop_na()
nrow(data)
js <- fromJSON(file = '../cached/JFK_IST.json') %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Price ($)`)
data
data %>% drop_na()
runApp('flight_analysis_app')
runApp('flight_analysis_app')
data %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`))
data %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`)) %>% select(`Leave Date`, p)
data %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`)) %>% select(`Leave Date`, p) %>% delete_duplicates()
data %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`)) %>% select(`Leave Date`, p) %>% distinct()
data %>% drop_na() %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`)) %>% select(`Leave Date`, p) %>% distinct()
runApp('flight_analysis_app')
runApp('flight_analysis_app')
runApp('flight_analysis_app')
data %>% drop_na() %>% group_by(`Leave Date`) %>% mutate(p = mean(`Price ($)`)) %>% select(`Leave Date`, p) %>% distinct()
runApp('flight_analysis_app')
library(rsconnect)
rsconnect::deployApp('/Users/kayacelebi/Projects/Flight_Analysis/flight_analysis_app')
runApp('flight_analysis_app')
library(rsconnect)
rsconnect::deployApp('/Users/kayacelebi/Projects/Flight_Analysis/flight_analysis_app')
list.files()
list.files('flight_analysis_app', pattern = "*.json")
list.files('flight_analysis_app', pattern = "json")
list.files('flight_analysis_app')
list.files('flight_analysis_app/cached')
list.files('flight_analysis_app/cached', pattern = "*.json")
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
)
ncol(data)
colnames(data)
load_cached <- function() {
files <- list.files('cached', pattern = '*.json')
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:len(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('cached', pattern = '*.json')
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('cached', pattern = '*.json')
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached()
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
load_cached()
load_cached <- function() {
files <- list.files('cached', pattern = '*.json')
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
load_cached()
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')[1:3]
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')[1:2]
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
data
load_cached <- function() {
files <- list.files('flight_analysis_app/cached', pattern = '*.json')[1:2]
print(files)
data <- data.frame(matrix(nrow = 0, ncol = 16))
colnames(data) <- c(
"Leave Date","Return Date", "Depart Time (Leg 1)",
"Arrival Time (Leg 1)", "Airline(s)", "Travel Time",
"Origin", "Destination", "Num Stops", "Layover Time",
"Stop Location", "CO2 Emission","Emission Avg Diff (%)",
"Price ($)", "Trip Type", "Access Date"
)
for (i in 1:length(files)) {
new_data <- get_data(files[i])
data <- rbind(data, new_data)
}
return(data)
}
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% select(`Leave Date`, `Return Date`, `Price ($)`) %>% drop_na()
return(data)
}
data <- load_cached()
data
get_data <- function(file) {
print(file)
js <- fromJSON(file = paste0('flight_analysis_app/cached/', file)) %>% transpose()
data <- tibble(js) %>%
unnest_wider(js) %>%
mutate(
`Leave Date` = as.Date(`Leave Date`),
`Return Date` = as.Date(`Return Date`),
`Num Stops` = as.integer(`Num Stops`),
`Emission Avg Diff (%)` = as.double(`Emission Avg Diff (%)`),
`Price ($)` = as.integer(`Price ($)`),
`Access Date` = as.Date(`Access Date`)
) %>% drop_na()
return(data)
}
data <- load_cached()
data
runApp()
runApp('flight_analysis_app')
data
runApp('flight_analysis_app')
data <- load_cached()
mean_return_data('JFK', 'IST', as.Date('06-01-2022'))
mean_leave_data <- function(origin, dest, leave_date) {
lf_data <- data %>%
filter(`Leave Date` == leave_date & Origin == origin & Destination == dest) %>%
group_by(`Leave Date`) %>%
mutate(p = mean(`Price ($)`)) %>%
select(`Leave Date`, p) %>% drop_na() %>% distinct()
return(lf_data)
}
mean_return_data <- function(origin, dest, return_date){
rf_data <- data %>%
filter(`Return Date` == return_date & Origin == origin & Destination == dest) %>%
group_by(`Return Date`) %>%
mutate(p = mean(`Price ($)`)) %>%
select(`Return Date`, p) %>% drop_na() %>% distinct()
return(rf_data)
}
mean_return_data('JFK', 'IST', as.Date('06-01-2022'))
mean_return_data('JFK', 'IST', as.Date('06-01-2022', format = '%m-%d-%Y'))
data %>% select(`Return Date`, Origin, Destination)
mean_return_data('JFK', 'IST', as.Date('06-21-2022', format = '%m-%d-%Y'))
runApp('flight_analysis_app')
library(rsconnect)
rsconnect::deployApp('/Users/kayacelebi/Projects/Flight_Analysis/flight_analysis_app')
